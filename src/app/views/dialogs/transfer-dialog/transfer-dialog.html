<h2 mat-dialog-title class="dialog-title-center">{{ data.title }}</h2>

<mat-dialog-content>
  <mat-card>
    <mat-card-content>

      <form [formGroup]="transferFormGroup" (ngSubmit)="transfer()"> 

        <!-- DEPARTMENT -->
        <mat-form-field appearance="outline" style="width: 49.5%;margin-right: 5px;" >
          <mat-label>SELECT DEPARTMENT</mat-label>
          <mat-select formControlName="department_id"  class="txupper" (selectionChange)="onDepartmentChange($event.value)">
            <mat-option *ngFor="let p of data.departmentList" [value]="p.id"  class="txupper">
              {{ p.department }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="
            transferFormGroup.get('department_id')?.touched &&
            transferFormGroup.get('department_id')?.invalid">
            Department is required
          </mat-error>
        </mat-form-field> 

         <!-- USER -->
        <mat-form-field appearance="outline" style="width: 49.5%;" >
          <mat-label>SELECT USER</mat-label>
          <mat-select formControlName="user_id"  class="txupper">
            <mat-option *ngFor="let user of userList" [value]="user.ID"  class="txupper">
              {{user.FistName}} {{user.LastName}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="
            transferFormGroup.get('user_id')?.touched &&
            transferFormGroup.get('user_id')?.invalid">
            User is required
          </mat-error>
        </mat-form-field> 

        <!-- COMMENT -->
        <mat-form-field appearance="outline" style="width:100%;">
          <mat-label>TRANSFER REASON</mat-label>
          <textarea matInput rows="3" formControlName="referring_reason"></textarea>
           
        </mat-form-field>

        <!-- BUTTON -->
        <div class="text-end mt-3">
         <div class="left"><button mat-raised-button color="primary" type="submit" [disabled]="isLoading">SUBMIT </button></div>
            <div class="right"><button mat-raised-button color="primary" (click)="close()">Close</button></div>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
   
</mat-dialog-content>

 

<div class="loader-backdrop" *ngIf="isLoading">
  <mat-spinner diameter="60"></mat-spinner>
</div>